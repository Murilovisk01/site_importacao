{% extends 'core/base.html' %}

{% block title %}Meu Relat√≥rio de Tempo{% endblock %}

{% block content %}
<h2 class="mb-4">Meu Relat√≥rio de Tempo</h2>

{% if registros_por_dia %}
    {% for data, registros in registros_por_dia.items %}
        <h5 class="text-muted mt-4 mb-3">üìÖ {{ data|date:"d/m/Y" }}</h5>
        {% for registro in registros %}
            <div class="card mb-3 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">{{ registro.tarefa.titulo }}</h5>
                    <p><strong>Sistema:</strong> {{ registro.tarefa.sistema }} - <strong>Tipo:</strong> {{ registro.tarefa.tipo }}</p>
                    <p><strong>In√≠cio:</strong> {{ registro.inicio|date:"d/m/Y H:i" }}</p>
                    <p><strong>Fim:</strong>
                        {% if registro.fim %}
                            {{ registro.fim|date:"d/m/Y H:i" }}
                        {% else %}
                            <span class="text-warning">Em andamento...</span>
                        {% endif %}
                    </p>
                    <p><strong>Dura√ß√£o:</strong>
                        {% if registro.fim %}
                            {{ registro.duracao }}
                        {% else %}
                            <span class="text-warning">Em andamento...</span>
                        {% endif %}
                    </p>
                    <p><strong>Status da Tarefa:</strong> {{ registro.tarefa.get_status_display }}</p>
                </div>
            </div>
        {% endfor %}
    {% endfor %}
{% else %}
    <p class="text-muted">Nenhum tempo registrado ainda.</p>
{% endif %}
{% endblock %}
